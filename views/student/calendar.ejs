<%- include('../partials/header') %>

<div class="container mx-auto p-4">
  <h2 class="text-2xl font-bold mb-4">Weekly Schedule</h2>
  
  <div class="mb-4">
    <a href="/student/dashboard" class="text-blue-600 hover:underline">← Back to Dashboard</a>
  </div>
  
  <!-- Add overflow-x-auto to handle sidebar collapse -->
  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 overflow-x-auto">
    <!-- Set a min-width to ensure it doesn't collapse too much -->
    <div id="weekly-calendar" class="border dark:border-gray-700 rounded min-w-[600px]"></div>
  </div>
  
  <div class="mt-6">
    <h3 class="text-xl font-semibold mb-2">Legend</h3>
    <div class="flex gap-4">
      <div class="flex items-center">
        <div class="w-4 h-4 bg-blue-100 dark:bg-blue-900 border border-blue-200 dark:border-blue-800 mr-2"></div>
        <span>Registered Course</span>
      </div>
      <div class="flex items-center">
        <div class="w-4 h-4 bg-red-200 dark:bg-red-900 border border-red-300 dark:border-red-800 mr-2"></div>
        <span>Conflict</span>
      </div>
    </div>
  </div>
</div>

<script>
  // Pass course data to the client-side
  window.registeredCourses = <%- JSON.stringify(student.registeredCourses || []) %>;
  console.log("Registered courses:", window.registeredCourses);
</script>

<script src="/js/student/student.js"></script>
<%- include('../partials/footer') %>